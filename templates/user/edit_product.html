{% include "master/index.html" %}

<div class="container-fluid mt-5 " style="width: 80%;">

    <h2>Update Product</h2>
    <div class="d-flex">
        <div class="col-md-8 col-sm-12">
        <form method="post" enctype="multipart/form-data" action="{{ url_for('save_update') }}">
            <div class="mb-3">
                <label class="">Product Name</label>
                <input type="text" class="form-control" id="name" name="title" value="{{current_product.title}}"  required>
            </div>
            <div class="mb-3">
                <label class="">Cost</label>
                <input type="number" class="form-control" id="name" name="cost" value="{{current_product.cost}}" required>
            </div>
            <div class="mb-3">
                <label class="">Price</label>
                <input type="number" class="form-control" id="name" name="price" value="{{current_product.price}}" required>
            </div>
            <div class="form-group mb-3">
                <label for="exampleFormControlSelect1">Category</label>
                <select class="form-control" id="exampleFormControlSelect1" name="category" value="{{current_product.category}}" required>
                    <option>Nike</option>
                    <option>Adidas</option>
                    <option>Converse</option>
                    <option>Gambol</option>
                </select>
            </div>
    
            <div class="mb-3">
                <label class="">Description</label>
                <input type="text" class="form-control" id="name" name="description" value="{{current_product.description}}" required>
            </div>
            <div class="form-group mb-3 ">
                <input type="file" accept="image/*" class="form-control" id="file" name="file" onchange="showMyImage(this)" >
                <input type="hidden" id="initial-file-name" name="updateImage" value="{{current_product.image}}">
            </div>
            
            <div class="d-flex justify-content-between">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <input type="hidden" value="{{current_product.id}}" name="pid">
                <button type="submit" class="btn btn-primary">Save Update</button>
            </div>
        </form>
    </div>
    <div class="col-md-4 col-sm-12">
        <img id="thumbnail" style="width:100%;" src="/static/image/product/{{current_product.image}}"
            alt="image">
    </div>
    </div>
    
</div>
<script>

    function showMyImage(fileInput) {
        const file = fileInput.files[0];
        const reader = new FileReader();

        reader.onload = function (e) {
            const image = document.getElementById('thumbnail');
            image.setAttribute('src', e.target.result);
        }

        if (file) {
            reader.readAsDataURL(file);
        }
    }

</script>